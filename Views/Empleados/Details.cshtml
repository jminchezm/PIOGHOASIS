@model PIOGHOASIS.Models.Empleado
@{
    if (ViewBag.IsPartial == true) { Layout = null; }

    string NombreCompleto(params string?[] parts) =>
        string.Join(" ", parts.Where(x => !string.IsNullOrWhiteSpace(x)));

    var fotoSrc = (Model?.Persona != null && !string.IsNullOrWhiteSpace(Model.Persona.FotoPath))
        ? Url.Content("~/" + Model.Persona.FotoPath)
        : Url.Content("~/img/DefaultUsuario.png");
}

<style>
    .usr-form {
        position: relative;
        margin-top: 0;
        width: 100%;
        min-height: calc(100vh - var(--header-h));
        padding: 24px;
        background: linear-gradient(rgba(255,255,255,.30), rgba(255,255,255,.30)), url('/img/dashboard/FondoDashboard.jpg') center/cover no-repeat #000;
    }

    .usr-card {
        background: rgba(255,255,255,.90);
        border: 1px solid rgba(0,0,0,.06);
        border-radius: .75rem;
        box-shadow: 0 6px 22px rgba(0,0,0,.08);
    }

    .usr-title {
        background: #f3c259;
        color: #222;
        font-weight: 800;
        font-size: 1.25rem;
        padding: .75rem 1rem;
        border-radius: .75rem .75rem 0 0;
    }

    .pill {
        font-weight: 700;
    }

    .ok {
        color: #16803d;
    }

    .off {
        color: #b42318;
    }
</style>

<div class="usr-form">
    <div class="d-flex justify-content-end mb-2">
        <a class="btn btn-secondary ajax-nav" href="/Empleados/Index" data-url="/Empleados/Index">
            <i class="bi bi-arrow-left"></i> Volver a la lista
        </a>
    </div>

    <div class="usr-card">
        <div class="usr-title">Detalle del empleado</div>

        <div class="p-3 p-md-4">

            <!-- Cabecera: avatar + nombre + estado -->
            <div class="row g-3 align-items-center">
                <div class="col-auto">
                    <img class="rounded-circle" style="width:72px;height:72px;object-fit:cover"
                         src="@fotoSrc" alt="Avatar" />
                    @* Si agregas el endpoint Avatar, podrías usar:
                    src="/Empleados/Avatar/@Model.EmpleadoID" *@
                </div>
                <div class="col">
                    <h5 class="mb-0">
                        @NombreCompleto(Model?.Persona?.PrimerNombre, Model?.Persona?.SegundoNombre, Model?.Persona?.PrimerApellido, Model?.Persona?.SegundoApellido)
                    </h5>
                    <small class="text-muted">
                        Estado:
                        @Html.Raw((Model?.Estado ?? false)
                                 ? "<span class='pill ok'>Activo</span>"
                                 : "<span class='pill off'>Inactivo</span>")
                    </small>
                </div>
            </div>

            <hr />

            <!-- Detalle: mismos datos que ya mostrabas -->
            <dl class="row">
                <dt class="col-sm-3">Código</dt>
                <dd class="col-sm-9">@Model?.EmpleadoID</dd>

                <dt class="col-sm-3">Puesto</dt>
                <dd class="col-sm-9">@((Model?.Puesto?.Nombre ?? Model?.PuestoID) ?? "-")</dd>

                <dt class="col-sm-3">Fecha de creación</dt>
                <dd class="col-sm-9">@((Model?.Persona?.FechaRegistro)?.ToString("dd/MM/yyyy") ?? "-")</dd>

                <dt class="col-sm-3">Correo electrónico</dt>
                <dd class="col-sm-9">@(!string.IsNullOrWhiteSpace(Model?.Persona?.Email) ? Model.Persona.Email : "-")</dd>

                <dt class="col-sm-3">No. Celular</dt>
                <dd class="col-sm-9">@(!string.IsNullOrWhiteSpace(Model?.Persona?.Telefono1) ? Model.Persona.Telefono1 : "-")</dd>

                <dt class="col-sm-3">Dirección</dt>
                <dd class="col-sm-9">@(!string.IsNullOrWhiteSpace(Model?.Persona?.Direccion) ? Model.Persona.Direccion : "-")</dd>

                <dt class="col-sm-3">Tipo de documento</dt>
                <dd class="col-sm-9">@(!string.IsNullOrWhiteSpace(Model?.Persona?.TipoDocumentoID) ? Model.Persona.TipoDocumentoID : "-")</dd>

                <dt class="col-sm-3">No. Documento</dt>
                <dd class="col-sm-9">@(!string.IsNullOrWhiteSpace(Model?.Persona?.NumeroDocumento) ? Model.Persona.NumeroDocumento : "-")</dd>

                <dt class="col-sm-3">NIT</dt>
                <dd class="col-sm-9">@(!string.IsNullOrWhiteSpace(Model?.Persona?.Nit) ? Model.Persona.Nit : "-")</dd>

                <dt class="col-sm-3">Fecha de nacimiento</dt>
                <dd class="col-sm-9">@((Model?.Persona?.FechaNacimiento)?.ToString("dd/MM/yyyy") ?? "-")</dd>

                <dt class="col-sm-3">Fecha de ingreso</dt>
                <dd class="col-sm-9">@((Model?.FechaContratacion)?.ToString("dd/MM/yyyy") ?? "-")</dd>

                <dt class="col-sm-3">Teléfono 2</dt>
                <dd class="col-sm-9">@(!string.IsNullOrWhiteSpace(Model?.Persona?.Telefono2) ? Model.Persona.Telefono2 : "-")</dd>

                <dt class="col-sm-3">Código Persona</dt>
                <dd class="col-sm-9">@(!string.IsNullOrWhiteSpace(Model?.PersonalID) ? Model.PersonalID : "-")</dd>
            </dl>

            <div class="mt-3">
                <a class="btn btn-primary ajax-nav"
                   href="/Empleados/Edit/@Model?.EmpleadoID"
                   data-url="/Empleados/Edit/@Model?.EmpleadoID">
                    <i class="bi bi-pencil-square"></i> Editar
                </a>
                <a class="btn btn-outline-secondary ajax-nav ms-2"
                   href="/Empleados/Index" data-url="/Empleados/Index">Volver</a>
            </div>
        </div>
    </div>
</div>
