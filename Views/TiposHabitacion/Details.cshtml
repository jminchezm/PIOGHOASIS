@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
@model PIOGHOASIS.Models.TipoHabitacion
@{
    Layout = null; // se renderiza dentro del Dashboard
}

<style>
    /* ===== Contenedor con el mismo fondo del dashboard ===== */
    .th-details {
        position: relative;
        width: 100%;
        min-height: calc(100vh - var(--header-h));
        padding: 24px;
        background: linear-gradient(rgba(255,255,255,.30), rgba(255,255,255,.30)), url('/img/dashboard/FondoDashboard.jpg') center/cover no-repeat #000;
        overflow: hidden;
    }

    /* Tarjeta "glass" */
    .td-card {
        background: rgba(255,255,255,.85);
        border: 1px solid rgba(0,0,0,.06);
        border-radius: .75rem;
        box-shadow: 0 8px 28px rgba(0,0,0,.08);
        backdrop-filter: blur(2px);
    }

    /* Encabezado dorado */
    .td-header {
        background: #f0a100;
        color: #1f2a37;
        font-weight: 800;
        padding: .75rem 1rem;
        border-top-left-radius: .75rem;
        border-top-right-radius: .75rem;
        border-bottom: 2px solid #d7a536;
        font-size: clamp(1.05rem,1.6vw,1.25rem);
    }

    /* Botón volver */
    .td-back {
        position: sticky;
        top: calc(var(--header-h) + 8px);
        z-index: 2;
        display: inline-flex;
        align-items: center;
        gap: .35rem;
        background: #4b5563;
        color: #fff;
        border: none;
        border-radius: .5rem;
        padding: .45rem .85rem;
        text-decoration: none;
        box-shadow: 0 4px 14px rgba(0,0,0,.15);
    }

        .td-back:hover {
            filter: brightness(.95);
            color: #fff;
        }

    /* Campos detalle */
    .td-field {
        padding: 1rem .25rem;
        border-bottom: 1px solid rgba(0,0,0,.08);
    }

    .td-label {
        font-weight: 800;
        color: #1f2a37;
    }

    .td-value {
        color: #111827;
    }

    /* Pills de estado (mismas del Index) */
    .pill {
        display: inline-block;
        padding: .15rem .5rem;
        border-radius: 999px;
        font-size: .9rem;
        font-weight: 700;
        border: 1px solid transparent;
    }

    .pill-ok {
        background: #e8f7e9;
        color: #16803d;
        border-color: #bfe8c2;
    }

    .pill-off {
        background: #fff0f0;
        color: #b42318;
        border-color: #f5c2c7;
    }

    /* Acción principal */
    .td-actions .btn-primary {
        font-weight: 800;
        padding: .65rem 1.2rem;
        box-shadow: 0 10px 22px rgba(13,110,253,.22);
    }
</style>

<div class="th-details">
    <!-- Volver -->
    <div class="d-flex justify-content-end mb-2">
        <a class="td-back ajax-nav"
           href="/TiposHabitacion/Index" data-url="/TiposHabitacion/Index"
           title="Volver a la lista">
            <i class="bi bi-arrow-left"></i> Volver a la lista
        </a>
    </div>

    <!-- Card Detalle -->
    <div class="td-card">
        <div class="td-header">
            Detalle del Tipo: @Model?.TipoHabitacionID
        </div>

        <div class="p-3 p-md-4">
            <div class="td-field row">
                <div class="col-12 col-md-3 td-label">Código:</div>
                <div class="col-12 col-md-9 td-value">@Model?.TipoHabitacionID</div>
            </div>

            <div class="td-field row">
                <div class="col-12 col-md-3 td-label">Nombre:</div>
                <div class="col-12 col-md-9 td-value">@Model?.Nombre</div>
            </div>

            <div class="td-field row">
                <div class="col-12 col-md-3 td-label">Descripción:</div>
                <div class="col-12 col-md-9 td-value">@Model?.Descripcion</div>
            </div>

            <div class="td-field row">
                <div class="col-12 col-md-3 td-label">Estado:</div>
                <div class="col-12 col-md-9 td-value">
                    @if (Model?.Estado == true)
                    {
                        <span class="pill pill-ok">Activo</span>
                    }
                    else
                    {
                        <span class="pill pill-off">Inactivo</span>
                    }
                </div>
            </div>

            <div class="td-actions mt-4 d-flex justify-content-center">
                <a class="btn btn-primary btn-lg ajax-nav"
                   href="/TiposHabitacion/Edit/@Model?.TipoHabitacionID"
                   data-url="/TiposHabitacion/Edit/@Model?.TipoHabitacionID">
                    <i class="bi bi-pencil-square me-1"></i> Editar Tipo de Habitación
                </a>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        // Navegación AJAX para mantener Details/Edit/Index dentro de #contentHost
        (function(){
          const host = window.parent?.document?.getElementById?.('contentHost')
                    || document.getElementById('contentHost');
          const hero = window.parent?.document?.getElementById?.('hero')
                    || document.getElementById('hero');

          document.querySelectorAll('.ajax-nav[data-url]').forEach(a=>{
            a.addEventListener('click', async (ev)=>{
              if(!host) return;
              ev.preventDefault();
              try{
                const url = a.dataset.url || a.getAttribute('href');
                const resp = await fetch(url, { headers:{ 'X-Requested-With':'XMLHttpRequest' }});
                const html = await resp.text();
                if (hero) hero.style.display = 'none';
                host.innerHTML = html;
                window.parent?.scrollTo?.(0,0);
              }catch{
                window.location.href = a.getAttribute('href');
              }
            });
          });
        })();
    </script>
}
