@model IEnumerable<PIOGHOASIS.Models.TipoHabitacion>
@{
    Layout = null;

    var q = Context.Request.Query;
    var qCodigo = q["codigo"].ToString();
    var qNombre = q["nombre"].ToString();
    var qEstado = q.ContainsKey("estado") ? q["estado"].ToString() : "1";
}

<style>
    /* Puedes copiar el mismo CSS de Puestos o mantenerlo simple.
       Aquí reutilizo las clases para que se vea igual. */
    .puestos-ui{position:relative;width:100%;min-height:calc(100vh - var(--header-h));
      background:linear-gradient(rgba(255,255,255,.30),rgba(255,255,255,.30)),url('/img/dashboard/FondoDashboard.jpg') center/cover no-repeat #000;
      overflow:hidden;padding:30px}
    .puestos-ui .card-filtros{background:rgba(255,255,255,.85);box-shadow:0 6px 22px rgba(0,0,0,.08);border:1px solid rgba(0,0,0,.06);border-radius:.75rem}
    .puestos-ui .tt{font-size:clamp(1.25rem,1.8vw,1.75rem);font-weight:800;color:#1f2a37}
    .btn-nuevo{background:#f0a100;border:none;color:#222;font-weight:800;box-shadow:0 10px 22px rgba(240,161,0,.35)}
    .btn-nuevo:hover{background:#db9400}
    .puestos-ui thead th{background:#f3c259;color:#222;border-bottom:2px solid #d7a536;vertical-align:middle}
    .puestos-ui tbody td{vertical-align:middle}
    .pill{display:inline-block;padding:.15rem .5rem;border-radius:999px;font-size:.84rem;font-weight:700}
    .pill-ok{background:#e8f7e9;color:#16803d;border:1px solid #bfe8c2}
    .pill-off{background:#fff0f0;color:#b42318;border:1px solid #f5c2c7}
    .btn-icon{--bs-btn-padding-y:.25rem;--bs-btn-padding-x:.45rem;--bs-btn-border-radius:.35rem}
    .btn-edit{color:#0d6efd;border-color:#cfe2ff;background:#eff6ff}
    .btn-detail{color:#0aa2c0;border-color:#beeaf3;background:#e7f9fd}
    .btn-delete{color:#dc3545;border-color:#f1c2c6;background:#fff1f2}
    .btn-edit:hover,.btn-detail:hover,.btn-delete:hover{filter:brightness(.95)}
    .clearable{position:relative}
    .clearable .btn-clear{position:absolute;right:.35rem;top:50%;transform:translateY(-50%);border:none;background:transparent;color:#6c757d;display:none}
    .clearable input:not(:placeholder-shown)+.btn-clear{display:block}
    .empty-state{min-height:320px;display:flex;align-items:center;justify-content:center;flex-direction:column}
    .empty-illus{max-width:160px;opacity:.85}
    @@media print{body *{visibility:hidden} #printArea,#printArea *{visibility:visible} #printArea{position:fixed;inset:0}}
</style>

<div class="puestos-ui">
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h2 class="tt mb-0">Tipos de habitación</h2>
        <a class="btn btn-nuevo" href="/TiposHabitacion/Create" data-url="/TiposHabitacion/Create">
            <i class="bi bi-plus-circle me-1"></i> Nuevo tipo
        </a>
    </div>

    <!-- Filtros -->
    <div class="card-filtros p-3 mb-3">
        <form id="frmFiltros" class="row g-3 align-items-end"
              data-endpoint="/TiposHabitacion/Index" data-report="/TiposHabitacion/ExportPdf">
            <div class="col-12 col-md-4">
                <label class="form-label fw-semibold">Código</label>
                <div class="clearable">
                    <input type="text" class="form-control" placeholder="Buscar por código" id="fCodigo" value="@qCodigo" />
                    <button type="button" class="btn-clear" onclick="this.previousElementSibling.value='';this.previousElementSibling.dispatchEvent(new Event('input'));">
                        <i class="bi bi-x-circle"></i>
                    </button>
                </div>
            </div>
            <div class="col-12 col-md-4">
                <label class="form-label fw-semibold">Nombre</label>
                <div class="clearable">
                    <input type="text" class="form-control" id="fNombre" placeholder="Buscar por nombre" value="@qNombre" />
                    <button type="button" class="btn-clear" onclick="this.previousElementSibling.value='';this.previousElementSibling.dispatchEvent(new Event('input'));">
                        <i class="bi bi-x-circle"></i>
                    </button>
                </div>
            </div>
            <div class="col-12 col-md-3">
                <label class="form-label fw-semibold">Estado</label>
                <select id="fEstado" class="form-select">
                    <option value="" selected="@(qEstado == ""  ? "selected" : null)">Todos</option>
                    <option value="1" selected="@(qEstado == "1" ? "selected" : null)">Activo</option>
                    <option value="0" selected="@(qEstado == "0" ? "selected" : null)">Inactivo</option>
                </select>
            </div>
            <div class="col-12 d-flex col-md-1">
                <button type="button" id="btnPrint" class="btn btn-outline-secondary" title="Imprimir">
                    <i class="bi bi-printer"></i>
                </button>
            </div>
        </form>
    </div>

    <div id="printArea" class="card p-0">
        @if (!Model.Any())
        {
            <div class="empty-state p-5 text-center">
                <img src="~/img/empty-search.svg" asp-append-version="true" alt="Sin resultados" class="mb-3 empty-illus" onerror="this.style.display='none'" />
                <h5 class="fw-bold mb-1">No se encontró ningún registro</h5>
                <p class="text-muted mb-3">Ajusta los filtros o limpia la búsqueda.</p>
                <button type="button" class="btn btn-outline-secondary js-clear-filters">
                    <i class="bi bi-eraser me-1"></i> Limpiar filtros
                </button>
            </div>
        }
        else
        {
            <div class="table-responsive">
                <table id="tblNumPaginador" class="table table-hover mb-0">
                    <thead>
                        <tr>
                            <th style="width:140px">Código</th>
                            <th style="width:240px">Nombre</th>
                            <th>Descripción</th>
                            <th style="width:120px">Estado</th>
                            <th style="width:150px" class="text-center">Acción</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var t in Model)
                        {
                            <tr data-codigo="@t.TipoHabitacionID" data-nombre="@t.Nombre" data-estado="@(t.Estado ? "1" : "0")">
                                <td>@t.TipoHabitacionID</td>
                                <td>@t.Nombre</td>
                                <td>@t.Descripcion</td>
                                <td>
                                    @(t.Estado
                                        ? Html.Raw("<span class=\"pill pill-ok\">Activo</span>")
                                        : Html.Raw("<span class=\"pill pill-off\">Inactivo</span>"))
                                </td>
                                <td class="text-center">
                                    <div class="btn-group" role="group">
                                        <a class="btn btn-sm btn-outline-primary btn-icon btn-edit ajax-nav"
                                           href="/TiposHabitacion/Edit/@t.TipoHabitacionID" data-url="/TiposHabitacion/Edit/@t.TipoHabitacionID" title="Editar">
                                            <i class="bi bi-pencil-square"></i>
                                        </a>
                                        <a class="btn btn-sm btn-outline-info btn-icon btn-detail ajax-nav"
                                           href="/TiposHabitacion/Details/@t.TipoHabitacionID" data-url="/TiposHabitacion/Details/@t.TipoHabitacionID" title="Detalles">
                                            <i class="bi bi-eye"></i>
                                        </a>
                                        @if (t.Estado)
                                        {
                                            <a class="btn btn-sm btn-outline-danger btn-icon btn-delete ajax-nav"
                                               href="/TiposHabitacion/Delete/@t.TipoHabitacionID" data-url="/TiposHabitacion/Delete/@t.TipoHabitacionID" title="Desactivar">
                                                <i class="bi bi-trash"></i>
                                            </a>
                                        }
                                    </div>
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>

            <div class="d-flex justify-content-between align-items-center p-2">
                <div class="small text-muted"><span id="infoRows"></span></div>
                <nav><ul id="pager" class="pagination mb-0"></ul></nav>
            </div>
        }
    </div>
</div>




@* @model IEnumerable<PIOGHOASIS.Models.TipoHabitacion>

@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Index</title>
</head>
<body>
<p>
    <a asp-action="Create">Create New</a>
</p>
<table class="table">
    <thead>
        <tr>
            <th>
                @Html.DisplayNameFor(model => model.Nombre)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Descripcion)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Estado)
            </th>
            <th></th>
        </tr>
    </thead>
    <tbody>
@foreach (var item in Model) {
        <tr>
            <td>
                @Html.DisplayFor(modelItem => item.Nombre)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Descripcion)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Estado)
            </td>
            <td>
                <a asp-action="Edit" asp-route-id="@item.TipoHabitacionID">Edit</a> |
                <a asp-action="Details" asp-route-id="@item.TipoHabitacionID">Details</a> |
                <a asp-action="Delete" asp-route-id="@item.TipoHabitacionID">Delete</a>
            </td>
        </tr>
}
    </tbody>
</table>
</body>
</html>
 *@